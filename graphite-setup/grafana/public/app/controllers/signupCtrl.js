/*! grafana - v2.5.0 - 2015-10-28
 * Copyright (c) 2015 Torkel Ã–degaard; Licensed Apache-2.0 */

define(["require","exports","angular","config"],function(a,b,c,d){var e=c.module("grafana.controllers"),f=function(){function a(a,b,c,d){this.$scope=a,this.$location=b,this.contextSrv=c,this.backendSrv=d,c.sidemenu=!1,a.ctrl=this,a.formModel={};var e=b.search();a.formModel.orgName=e.email,a.formModel.email=e.email,a.formModel.username=e.email,a.formModel.code=e.code,a.verifyEmailEnabled=!1,a.autoAssignOrg=!1,d.get("/api/user/signup/options").then(function(b){a.verifyEmailEnabled=b.verifyEmailEnabled,a.autoAssignOrg=b.autoAssignOrg})}return a.$inject=["$scope","$location","contextSrv","backendSrv"],a.prototype.submit=function(){this.$scope.signUpForm.$valid&&this.backendSrv.post("/api/user/signup/step2",this.$scope.formModel).then(function(a){window.location.href="redirect-to-select-org"===a.code?d.appSubUrl+"/profile/select-org?signup=1":d.appSubUrl+"/"})},a}();b.SignUpCtrl=f,e.controller("SignUpCtrl",f)});