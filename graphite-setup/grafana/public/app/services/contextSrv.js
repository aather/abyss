/*! grafana - v2.5.0 - 2015-10-28
 * Copyright (c) 2015 Torkel Ã–degaard; Licensed Apache-2.0 */

define(["angular","lodash","store","config"],function(a,b,c,d){"use strict";var e=a.module("grafana.services");e.service("contextSrv",["$rootScope","$timeout",function(a,e){function f(){window.grafanaBootData.user&&b.extend(this,window.grafanaBootData.user)}var g=this;a.$on("toggle-sidemenu",function(){g.toggleSideMenu()}),this.hasRole=function(a){return this.user.orgRole===a},this.setSideMenuState=function(a){this.sidemenu=a,c.set("grafana.sidemenu",a)},this.toggleSideMenu=function(){this.setSideMenuState(!this.sidemenu),e(function(){a.$broadcast("render")},50)},this.getSidemenuDefault=function(){return this.hasRole("Admin")},this.version=d.buildInfo.version,this.lightTheme=!1,this.user=new f,this.isSignedIn=this.user.isSignedIn,this.isGrafanaAdmin=this.user.isGrafanaAdmin,this.sidemenu=c.getBool("grafana.sidemenu",this.getSidemenuDefault()),this.isSignedIn&&!c.exists("grafana.sidemenu")&&c.set("grafana.sidemenu",!1),this.isEditor=this.hasRole("Editor")||this.hasRole("Admin")}])});